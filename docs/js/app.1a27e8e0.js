(function(t){function e(e){for(var r,a,i=e[0],c=e[1],u=e[2],d=0,h=[];d<i.length;d++)a=i[d],s[a]&&h.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},s={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/nem2-wallet/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"7faf":function(t,e,n){"use strict";var r=n("8fba"),s=n.n(r);s.a},"8fba":function(t,e,n){},ad90:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[n("span",[t._v(t._s(t.title)+" ")])]),n("v-content",{staticClass:"main__content"},[n("v-fade-transition",{attrs:{mode:"out-in"}},[n("router-view")],1)],1)],1)},o=[],a=n("9ab4"),i=n("60a3"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="NEM2 wallet",e}return a["c"](e,t),e}(i["c"]),u=c,l=u,d=(n("7faf"),n("2877")),h=Object(d["a"])(l,s,o,!1,null,null,null),f=h.exports,p=n("8c4f"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"homepage"},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[null!==t.wallet?n("v-card",[n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Network")])])],1),n("div",[n("table",{staticClass:"table__list",attrs:{border:"1"}},[n("tr",[n("td",{staticClass:"table__key",attrs:{width:"15%"}},[t._v("net")]),n("td",{staticClass:"table__value",attrs:{width:"85%"}},[t._v(t._s(t.network.net))])]),n("tr",[n("td",{staticClass:"table__key",attrs:{width:"15%"}},[t._v("endpoint")]),n("td",{staticClass:"table__value",attrs:{width:"85%"}},[n("a",{attrs:{href:t.network.explorer,target:"_blank"}},[t._v(t._s(t.network.endpoint))])])]),n("tr",[n("td",{staticClass:"table__key",attrs:{width:"15%"}},[t._v("faucet")]),n("td",{staticClass:"table__value",attrs:{width:"85%"}},[n("a",{attrs:{href:t.network.faucetUrl,target:"_blank"}},[t._v(t._s(t.network.faucetUrl))])])])])]),n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Balance")])]),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:t.isLoading},on:{click:function(e){return t.onLoadBalance()}}},[n("v-icon",[t._v("cached")])],1)],1),n("v-card-text",[t._v(t._s(t.balance)+" xem")]),n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Address")])])],1),n("v-card-text",[t._v(t._s(t.wallet.address))]),n("v-card",{attrs:{flat:""}},[n("qriously",{attrs:{size:200},model:{value:t.qrJson,callback:function(e){t.qrJson=e},expression:"qrJson"}})],1),n("div",[n("a",{attrs:{href:"#"},on:{click:function(){return t.isShowPrivateKey=!t.isShowPrivateKey}}},[t._v("Show PrivateKey")]),t.isShowPrivateKey?n("div",{staticStyle:{margin:"8px"}},[t._v("\n              "+t._s(t.wallet.privateKey)+"\n            ")]):t._e()])],1),n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Send")])])],1),n("div",{staticStyle:{margin:"4px 26px"}},[n("v-text-field",{attrs:{label:"Address",required:"",placeholder:"SADW6WXZVIUWIJ6RAWFSM4F4SJRUBRVOARXXIFSH"},model:{value:t.sendCoinInfo.address,callback:function(e){t.$set(t.sendCoinInfo,"address",e)},expression:"sendCoinInfo.address"}}),n("v-text-field",{attrs:{label:"NEM",type:"number",required:""},model:{value:t.sendCoinInfo.amount,callback:function(e){t.$set(t.sendCoinInfo,"amount",e)},expression:"sendCoinInfo.amount"}}),n("v-text-field",{attrs:{label:"Message",placeholder:"Hello"},model:{value:t.sendCoinInfo.message,callback:function(e){t.$set(t.sendCoinInfo,"message",e)},expression:"sendCoinInfo.message"}})],1),n("v-flex",[n("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onSend()}}},[t._v("SEND")])],1),n("v-flex",[n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Result")])])],1),t._l(t.errorMessages,function(e,r){return n("div",{key:r},[!0!==e?n("div",{staticClass:"errorLabel"},[t._v(t._s(e))]):t._e()])}),n("p",{domProps:{innerHTML:t._s(t.resultMessage)}})],2),n("v-flex",[n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Transaction history")])]),t._v("\n              "+t._s(t.transactionHistory.length)+"\n              "),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:t.isLoading},on:{click:function(e){return t.onLoadTransactionHistory(!0)}}},[n("v-icon",[t._v("cached")])],1)],1),n("div",{staticStyle:{margin:"4px 20px"}},[n("v-data-table",{attrs:{headers:t.headers,items:t.transactionHistory,pagination:t.pagination,"hide-actions":"","no-data-text":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",{on:{click:function(n){return t.onClick(e.item)}}},[n("td",[t._v(t._s(e.item.amount))]),n("td",[t._v(t._s(e.item.hash))]),n("td",[t._v(t._s(t._f("dateFormat")(e.item.date)))])])]}}],null,!1,2647952482)}),n("v-btn",{staticClass:"white--text",attrs:{color:"deep-orange lighten-3",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onLoadTransactionHistory()}}},[t._v("MORE")])],1)],1)],1)],1)],1):t._e()],1)],1)},y=[],b=n("2f62"),w=n("340b"),g=n("10bf"),m=n.n(g),_=function(){function t(){}return t.qrJson=function(t,e,n,r,s,o){var a={type:e,data:{name:n,addr:r,amount:s*this.divisibility(),msg:o},v:t};return m.a.codeToString(m.a.convert(this.getStr2Array(JSON.stringify(a)),"UTF8"))},t.divisibility=function(){return Math.pow(10,6)},t.networkLabel=function(t){switch(t){case 104:return"MAIN_NET";case 152:return"TEST_NET";case 96:return"MIJIN";case 144:return"MIJIN_TEST";default:return"Unknow"}},t.getStr2Array=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return e},t}(),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.balance=0,e.sendCoinInfo={address:"",amount:0,message:""},e.wallet=null,e.qrJson="",e.isShowPrivateKey=!1,e.errorMessages=[],e.resultMessage="",e.network={net:_.networkLabel(Number("144")),endpoint:"http://elephant.48gh23s.xyz:3000",explorer:"http://explorer48gh23s.z31.web.core.windows.net/?host=elephant.48gh23s.xyz:3000",faucetUrl:"https://planethouki.github.io/nem/faucet/elephant.html"},e.headers=[{text:"amount",value:"amount"},{text:"txHash",value:"hash"},{text:"date",value:"date"}],e.pagination={sortBy:"date",descending:!0,rowsPerPage:-1},e.transactionHistory=[],e}return a["c"](e,t),e.prototype.onValueChange=function(t,e){this.qrJson=_.qrJson(2,2,"nem2-wallet",t,0,"")},e.prototype.mounted=function(){i["c"].prototype.$toast("Hello NEM2 wallet"),this.configure()},e.prototype.configure=function(){return a["a"](this,void 0,void 0,function(){var t,e;return a["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),t=this,[4,this.fetchLoadWalletUseCase.execute()];case 1:return t.wallet=n.sent(),[4,this.onLoadBalance()];case 2:return n.sent(),[4,this.onLoadTransactionHistory()];case 3:return n.sent(),[3,5];case 4:return e=n.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.onLoadBalance=function(){return a["a"](this,void 0,void 0,function(){var t,e;return a["d"](this,function(n){switch(n.label){case 0:this.$store.commit("startLoading"),n.label=1;case 1:return n.trys.push([1,3,,4]),null===this.wallet?[2]:(t=this,[4,this.fetchLoadBalanceUseCase.execute(this.wallet.address)]);case 2:return t.balance=n.sent(),console.log("balance",this.balance),[3,4];case 3:return e=n.sent(),console.error("balance",e),[3,4];case 4:return this.$store.commit("stopLoading"),[2]}})})},e.prototype.onSend=function(){return a["a"](this,void 0,void 0,function(){var t,e;return a["d"](this,function(n){switch(n.label){case 0:this.$store.commit("startLoading"),n.label=1;case 1:if(n.trys.push([1,4,,5]),this.resultMessage="",0!==this.validation().length)throw new Error("Cloud not send coin.");return[4,this.fetchLoadWalletUseCase.execute()];case 2:return n.sent(),[4,this.fetchSendCoinUseCase.execute(this.sendCoinInfo.address,Number(this.sendCoinInfo.amount),this.sendCoinInfo.message)];case 3:return t=n.sent(),console.log("sendCoin",t),this.resultMessage="SUCCESS: "+t.hash,[3,5];case 4:return e=n.sent(),console.error("sendCoin",e),this.resultMessage="FAILED: "+e.message,[3,5];case 5:return i["c"].prototype.$toast(this.resultMessage),this.$store.commit("stopLoading"),[2]}})})},e.prototype.onClick=function(t){console.log("onClick",t)},e.prototype.onLoadTransactionHistory=function(t){return void 0===t&&(t=!1),a["a"](this,void 0,void 0,function(){var e,n,r;return a["d"](this,function(s){switch(s.label){case 0:this.$store.commit("startLoading"),s.label=1;case 1:return s.trys.push([1,3,,4]),!0===t&&(this.transactionHistory=[],this.transactionId=void 0),[4,this.fetchLoadTransactionHistoryUseCase.execute(20,this.transactionId)];case 2:return e=s.sent(),console.log("history",e),0!==e.length&&(this.transactionId=e[e.length-1].id),(r=this.transactionHistory).push.apply(r,e),console.log("onLoadTransactionHistory",this.transactionHistory,this.transactionId),[3,4];case 3:return n=s.sent(),console.error("onLoadTransactionHistory",n),[3,4];case 4:return this.$store.commit("stopLoading"),[2]}})})},e.prototype.validation=function(){return this.errorMessages=[],console.log(this.sendCoinInfo),40!==this.sendCoinInfo.address.length&&this.errorMessages.push('Address (except "-") is 40 characters'),/^[a-zA-Z0-9-]+$/.test(this.sendCoinInfo.address)||this.errorMessages.push("Invalid input"),this.sendCoinInfo.message.length>1024&&this.errorMessages.push("Maximum number of characters in message has exceeded"),this.errorMessages},e.prototype.clear=function(){this.sendCoinInfo={address:"",amount:0,message:""}},a["b"]([Object(i["b"])("FetchLoadBalanceUseCase")],e.prototype,"fetchLoadBalanceUseCase",void 0),a["b"]([Object(i["b"])("FetchLoadWalletUseCase")],e.prototype,"fetchLoadWalletUseCase",void 0),a["b"]([Object(i["b"])("FetchSendCoinUseCase")],e.prototype,"fetchSendCoinUseCase",void 0),a["b"]([Object(i["b"])("FetchLoadTransactionHistoryUseCase")],e.prototype,"fetchLoadTransactionHistoryUseCase",void 0),a["b"]([Object(i["d"])("wallet.address")],e.prototype,"onValueChange",null),e=a["b"]([Object(i["a"])({name:"HomePage",computed:Object(b["b"])(["isLoading"]),filters:{dateFormat:function(t){return Object(w["format"])(t,"YYYY/MM/DD HH:mm:ss")}}})],e),e}(i["c"]),k=C,x=k,S=(n("f545"),Object(d["a"])(x,v,y,!1,null,"1d4da0d5",null)),L=S.exports;r["default"].use(p["a"]);var A=new p["a"]({mode:"history",base:"/nem2-wallet/",routes:[{path:"/",name:"home_page",component:L}]});r["default"].use(b["a"]);var H=new b["a"].Store({state:{isLoading:!1},mutations:{stopLoading:function(t){t.isLoading=!1},startLoading:function(t){t.isLoading=!0}},actions:{}}),I=n("9483");Object(I["a"])("/nem2-wallet/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var M=n("ce5b"),T=n.n(M),O=(n("cc20"),n("7869")),F=n.n(O),K=n("6112"),U=n.n(K),P=function(){function t(t){this.repository=t}return t.prototype.execute=function(t){return a["a"](this,void 0,void 0,function(){var e;return a["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.repository.loadBalance(t)];case 1:return[2,n.sent()];case 2:throw e=n.sent(),e;case 3:return[2]}})})},t}(),j=function(){function t(t){this.repository=t}return t.prototype.execute=function(){return a["a"](this,void 0,void 0,function(){var t,e;return a["d"](this,function(n){switch(n.label){case 0:return[4,this.repository.loadWallet()];case 1:return t=n.sent(),void 0===t?[3,2]:(e=t,[3,4]);case 2:return[4,this.repository.createWallet()];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}})})},t}(),N=function(){function t(t,e){this.transactionRepository=t,this.walletRepository=e}return t.prototype.execute=function(t,e,n){return a["a"](this,void 0,void 0,function(){var r,s,o;return a["d"](this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.walletRepository.loadWallet()];case 1:return r=a.sent(),s=r.privateKey,[4,this.transactionRepository.sendAsset(s,t,e,n)];case 2:return[2,a.sent()];case 3:throw o=a.sent(),o;case 4:return[2]}})})},t}(),E=function(){function t(t,e){this.transactionRepository=t,this.walletRepository=e}return t.prototype.execute=function(t,e){return a["a"](this,void 0,void 0,function(){var n,r,s;return a["d"](this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.walletRepository.loadWallet()];case 1:return n=o.sent(),r=n.publicKey,[4,this.transactionRepository.transactionHistory(r,t,e)];case 2:return[2,o.sent()];case 3:throw s=o.sent(),s;case 4:return[2]}})})},t}(),B=n("a002"),R=n.n(B),W=function(){function t(t,e,n,r){this.address=t,this.publicKey=e,this.privateKey=n,this.networkType=r}return t.prototype.toJSON=function(){return{address:this.address,publicKey:this.publicKey,privateKey:this.privateKey,networkType:this.networkType}},t}(),J=function(){function t(t){this.wrapper=t,this.localStorageKey="nem2-wallet"}return t.prototype.createWallet=function(){return a["a"](this,void 0,void 0,function(){var t;return a["d"](this,function(e){switch(e.label){case 0:return t=this.wrapper.createAccount(),[4,R.a.setItem(this.localStorageKey,t.toJSON())];case 1:return e.sent(),[2,t]}})})},t.prototype.loadWallet=function(){return a["a"](this,void 0,void 0,function(){var t;return a["d"](this,function(e){switch(e.label){case 0:return[4,R.a.getItem(this.localStorageKey)];case 1:return t=e.sent(),console.log("loadWallet",t),null!==t?[2,new W("address"in t?t.address:void 0,"publicKey"in t?t.publicKey:void 0,"privateKey"in t?t.privateKey:void 0,"networkType"in t?t.networkType:void 0)]:[2,void 0]}})})},t.prototype.loadBalance=function(t){return a["a"](this,void 0,void 0,function(){var e;return a["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.wrapper.loadBalance(t)];case 1:return[2,n.sent()];case 2:throw e=n.sent(),e;case 3:return[2]}})})},t}(),$=function(){function t(t){this.wrapper=t}return t.prototype.sendAsset=function(t,e,n,r){return a["a"](this,void 0,void 0,function(){var s;return a["d"](this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.wrapper.sendAsset(t,e,n,r)];case 1:return[2,o.sent()];case 2:throw s=o.sent(),s;case 3:return[2]}})})},t.prototype.transactionHistory=function(t,e,n){return a["a"](this,void 0,void 0,function(){var r;return a["d"](this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.wrapper.transactionHistory(t,e,n)];case 1:return[2,s.sent()];case 2:throw r=s.sent(),r;case 3:return[2]}})})},t}(),D=n("db6a"),q=n("a6c5"),z=n("ebb6"),V=n("f551"),Y=function(){function t(t,e,n,r,s,o,a,i,c){this.id=t,this.amount=e,this.fee=n,this.toAddress=r,this.fromAddress=s,this.message=o,this.date=a,this.hash=i,this.rawValue=c}return t}(),Z=function(){function t(t,e){this.hash=t,this.message=e}return t}(),G=function(){function t(t,e,n,r){this.host=t,this.port=e,this.network=n,this.networkGenerationHash=r,this.endpoint=t+":"+e,this.accountHttp=new D["AccountHttp"](this.endpoint),this.mosaicHttp=new D["MosaicHttp"](this.endpoint),this.mosaicService=new D["MosaicService"](this.accountHttp,this.mosaicHttp),this.transactionHttp=new D["TransactionHttp"](this.endpoint),console.log(this.host,this.port,this.network,this.endpoint,this.networkGenerationHash)}return t.prototype.createAccount=function(){var t=D["Account"].generateNewAccount(this.network);return new W(t.address.plain(),t.publicKey,t.privateKey,t.address.networkType.valueOf())},t.prototype.loadBalance=function(t){return a["a"](this,void 0,void 0,function(){var e,n=this;return a["d"](this,function(r){return e=D["Address"].createFromRawAddress(t),[2,new Promise(function(t,r){n.mosaicService.mosaicsAmountViewFromAddress(e).pipe(Object(q["a"])(function(t){return t})).subscribe(function(e){return t(e.relativeAmount())},function(t){return r(t)})})]})})},t.prototype.sendAsset=function(t,e,n,r){return a["a"](this,void 0,void 0,function(){var s,o,i,c,u=this;return a["d"](this,function(a){return s=D["Address"].createFromRawAddress(e),o=D["TransferTransaction"].create(D["Deadline"].create(),s,[D["NetworkCurrencyMosaic"].createRelative(n)],void 0!==r?D["PlainMessage"].create(r):D["PlainMessage"].create(""),this.network),i=D["Account"].createFromPrivateKey(t,this.network),c=i.sign(o,this.networkGenerationHash),[2,new Promise(function(t,e){u.transactionHttp.announce(c).pipe(Object(z["a"])(function(t){return new Z(c.hash,t.message)})).subscribe(function(e){return t(e)},function(t){return e(t)})})]})})},t.prototype.transactionHistory=function(t,e,n){return a["a"](this,void 0,void 0,function(){var r,s=this;return a["d"](this,function(o){return r=D["PublicAccount"].createFromPublicKey(t,this.network),[2,new Promise(function(t,o){s.accountHttp.transactions(r,new D["QueryParams"](e,n)).pipe(Object(z["a"])(function(t){return t.filter(function(t){return t instanceof D["TransferTransaction"]}).map(function(t){return t}).filter(function(t){return void 0!==t.transactionInfo&&t.transactionInfo instanceof D["TransactionInfo"]}).map(function(t){return new Y(t.transactionInfo.id,0!==t.mosaics.length?t.mosaics[0].amount.compact()/_.divisibility():0,t.maxFee.compact(),t.recipient instanceof D["Address"]?t.recipient.plain():"",void 0!==t.signer?t.signer.address.plain():"",t.message.payload,new Date(t.deadline.value.atZone(V["ZoneId"].SYSTEM).toInstant().toEpochMilli()),t.transactionInfo.hash,t)})})).subscribe(function(e){return t(e)},function(t){return o(t)})})]})})},t}(),X="http://elephant.48gh23s.xyz",Q="3000",tt=Number("144"),et="FA90D13C1A54ACF8326692EF7D3E7BA63B9914F7699286DFD3112BD72988778A",nt=new G(X,Q,tt,et),rt=new J(nt),st=new $(nt),ot={FetchLoadBalanceUseCase:new P(rt),FetchLoadWalletUseCase:new j(rt),FetchSendCoinUseCase:new N(st,rt),FetchLoadTransactionHistoryUseCase:new E(st,rt)};r["default"].use(T.a),r["default"].use(F.a,{defaultType:"bottom",duration:3e3,wordWrap:!0,width:"280px"}),r["default"].use(U.a),r["default"].config.productionTip=!1,new r["default"]({provide:ot,router:A,store:H,render:function(t){return t(f)}}).$mount("#app")},f545:function(t,e,n){"use strict";var r=n("ad90"),s=n.n(r);s.a}});
//# sourceMappingURL=app.1a27e8e0.js.map