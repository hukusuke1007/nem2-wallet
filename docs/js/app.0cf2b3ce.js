(function(t){function e(e){for(var a,i,r=e[0],c=e[1],l=e[2],h=0,u=[];h<r.length;h++)i=r[h],n[i]&&u.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(u.length)u.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/nem2-wallet/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"00c6":function(t,e,s){"use strict";var a=s("c325"),n=s.n(a);n.a},1:function(t,e){},2:function(t,e){},2834:function(t,e,s){},3:function(t,e){},"30b8":function(t,e,s){},4:function(t,e){},5:function(t,e){},"5bec":function(t,e,s){"use strict";var a=s("2834"),n=s.n(a);n.a},"78ec":function(t,e,s){"use strict";var a=s("30b8"),n=s.n(a);n.a},"7faf":function(t,e,s){"use strict";var a=s("8fba"),n=s.n(a);n.a},"8fba":function(t,e,s){},c325:function(t,e,s){},cd49:function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",[s("router-link",{staticStyle:{"text-decoration":"none",color:"white"},attrs:{to:"/"}},[s("span",[t._v("NEM2 wallet")])])],1),s("div",{staticClass:"main__content"},[s("v-fade-transition",{attrs:{mode:"out-in"}},[s("router-view")],1)],1)])},o=[],i=(s("7faf"),s("2877")),r={},c=Object(i["a"])(r,n,o,!1,null,null,null),l=c.exports,d=s("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[null!==t.wallet?s("v-card",[s("v-container",{attrs:{fluid:""}},[s("v-card",{attrs:{flat:""}},[s("v-card-actions",[s("v-card-title",[s("h3",[t._v("Network")])])],1),s("div",[s("table",{staticClass:"table__list",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"table__key",attrs:{width:"15%"}},[t._v("net")]),s("td",{staticClass:"table__value",attrs:{width:"85%"}},[t._v(t._s(t.network.net))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"15%"}},[t._v("endpoint")]),s("td",{staticClass:"table__value",attrs:{width:"85%"}},[s("a",{attrs:{href:t.network.explorer,target:"_blank"}},[t._v(t._s(t.network.endpoint))])])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"15%"}},[t._v("faucet")]),s("td",{staticClass:"table__value",attrs:{width:"85%"}},[s("a",{attrs:{href:t.network.faucetUrl,target:"_blank"}},[t._v(t._s(t.network.faucetUrl))])])])])]),s("v-card-actions",[s("v-card-title",[s("h3",[t._v("Address")])])],1),s("v-card-text",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.wallet.address))]),s("v-card",{attrs:{flat:""}},[s("qriously",{attrs:{size:200},model:{value:t.qrJson,callback:function(e){t.qrJson=e},expression:"qrJson"}})],1),s("div",[s("a",{attrs:{href:"#"},on:{click:function(){return t.isShowPrivateKey=!t.isShowPrivateKey}}},[t._v("Show PrivateKey")]),t.isShowPrivateKey?s("div",{staticStyle:{margin:"8px"}},[s("p",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.wallet.privateKey))])]):t._e()])],1),s("v-card",{attrs:{flat:""}},[s("v-card-actions",[s("v-card-title",[s("h3",[t._v("Menu")])])],1),s("ul",{staticClass:"menu__list"},[s("li",[s("router-link",{attrs:{to:"./asset_exchange_page"}},[t._v("\n                Exchange Asset\n              ")])],1)])],1),s("v-card",{attrs:{flat:""}},[s("v-card-actions",[s("v-card-title",[s("h3",[t._v("Balance")])]),s("v-spacer"),s("v-btn",{attrs:{fab:"",small:"",text:"",loading:t.isLoading},on:{click:function(e){return t.onLoadBalance()}}},[s("v-icon",[t._v("cached")])],1)],1),0!==t.assets.length?s("div",[s("v-data-table",{attrs:{items:t.assets,"hide-default-footer":"","no-data-text":""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",{on:{click:function(s){return t.onClickAsset(e.item)}}},[s("td",{attrs:{width:"50%"}},[t._v(t._s(e.item.mosaicId))]),s("td",{attrs:{width:"50%"}},[t._v(t._s(e.item.relativeAmount))])])]}}],null,!1,2510852479)})],1):s("div",[s("v-card-text",[t._v("0 xem")])],1),s("v-card-actions",[s("v-card-title",[s("h3",[t._v("Send")])])],1),s("v-form",{staticStyle:{margin:"4px 26px"}},[s("v-text-field",{attrs:{label:"currency",disabled:""},model:{value:t.sendAsset.mosaicId,callback:function(e){t.$set(t.sendAsset,"mosaicId",e)},expression:"sendAsset.mosaicId"}}),s("v-text-field",{attrs:{label:"address",required:"",placeholder:"SADW6WXZVIUWIJ6RAWFSM4F4SJRUBRVOARXXIFSH"},model:{value:t.sendAsset.address,callback:function(e){t.$set(t.sendAsset,"address",e)},expression:"sendAsset.address"}}),s("v-text-field",{attrs:{label:"amount",type:"number",required:""},model:{value:t.sendAsset.relativeAmount,callback:function(e){t.$set(t.sendAsset,"relativeAmount",e)},expression:"sendAsset.relativeAmount"}}),s("v-text-field",{attrs:{label:"message",placeholder:"Hello"},model:{value:t.sendAsset.message,callback:function(e){t.$set(t.sendAsset,"message",e)},expression:"sendAsset.message"}})],1),s("v-flex",[s("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onSend()}}},[t._v("SEND")])],1),s("v-flex",[s("v-card-actions",[s("v-card-title",[s("h3",[t._v("Result")])])],1),t._l(t.errorMessages,function(e,a){return s("div",{key:a},[!0!==e?s("div",{staticClass:"errorLabel"},[t._v(t._s(e))]):t._e()])}),s("p",{staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(t.resultMessage)}})],2),s("v-flex",[s("v-card-actions",{staticStyle:{"word-break":"break-all"}},[s("v-card-title",[s("h3",[t._v("Aggregate consig list")])]),t._v("\n              "+t._s(t.aggregateConsigs.length)+"\n              "),s("v-spacer"),s("v-btn",{attrs:{fab:"",small:"",text:"",loading:t.isAggregateConsigLoading},on:{click:function(e){return t.onLoadAggregateConsigList(!0)}}},[s("v-icon",[t._v("cached")])],1)],1),s("div",{staticStyle:{margin:"4px 20px"}},[s("v-data-table",{attrs:{headers:t.aggregateConsigHeaders,items:t.aggregateConsigs,"hide-default-footer":"","no-data-text":""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",{on:{click:function(s){return t.onClickAggregateConsig(e.item)}}},[s("td",{attrs:{width:"20%"}},[t._v(t._s(t.addressLabel(e.item.distributerAddress)))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.distributerGetAmount))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(t.addressLabel(e.item.receiverAddress)))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.receiverGetCurrency))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.receiverGetAmount))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(t._f("dateFormat")(e.item.deadline)))])])]}}],null,!1,1303641842)})],1)],1),s("v-flex",[s("v-card-actions",{staticStyle:{"word-break":"break-all"}},[s("v-card-title",[s("h3",[t._v("Transaction history")])]),t._v("\n              "+t._s(t.transactionHistory.length)+"\n              "),s("v-spacer"),s("v-btn",{attrs:{fab:"",small:"",text:"",loading:t.isHistoryLoading},on:{click:function(e){return t.onLoadAggregateConsigList(!0)}}},[s("v-icon",[t._v("cached")])],1)],1),s("div",{staticStyle:{margin:"4px 20px"}},[s("v-data-table",{attrs:{headers:t.historyHeaders,items:t.transactionHistory,options:t.pagination,"hide-default-footer":"","no-data-text":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",{on:{click:function(s){return t.onClickHistory(e.item)}}},[s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.amount))]),s("td",{attrs:{width:"50%"}},[t._v(t._s(e.item.hash))]),s("td",{attrs:{width:"30%"}},[t._v(t._s(t._f("dateFormat")(e.item.date)))])])]}}],null,!1,4250521784)}),s("v-btn",{staticClass:"white--text",attrs:{color:"deep-orange lighten-3",loading:t.isHistoryLoading,disabled:t.isHistoryLoading},on:{click:function(e){return t.onLoadTransactionHistory()}}},[t._v("MORE")])],1)],1)],1)],1)],1):t._e()],1)],1)},u=[],g=s("9ab4"),m=s("60a3"),p=s("2f62"),v=s("340b");class b{constructor(){this.address="",this.mosaicId="",this.message=void 0,this.relativeAmount=0,this.divisibility=6}clear(){this.address="",this.message=void 0,this.relativeAmount=0}getRawAmount(){return this.relativeAmount*Math.pow(10,this.divisibility)}}var w=s("10bf"),y=s.n(w);class A{static qrJson(t,e,s,a,n,o){const i={type:e,data:{name:s,addr:a,amount:n*this.divisibility(),msg:o},v:t};return y.a.codeToString(y.a.convert(this.getStr2Array(JSON.stringify(i)),"UTF8"))}static divisibility(){return Math.pow(10,6)}static networkLabel(t){switch(t){case 104:return"MAIN_NET";case 152:return"TEST_NET";case 96:return"MIJIN";case 144:return"MIJIN_TEST";default:return"Unknow"}}static rentalBlock(t){return 86400*t/15}static getStr2Array(t){const e=[];for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s));return e}}var f=s("59ca");s("ea7b");let _=class extends m["d"]{constructor(){super(...arguments),this.balance=0,this.assets=[],this.sendAsset=new b,this.wallet=null,this.qrJson="",this.isShowPrivateKey=!1,this.errorMessages=[],this.resultMessage="",this.network={net:A.networkLabel(Number("144")),endpoint:"https://catapult-test.opening-line.jp:3001",explorer:"http://catapult-test.opening-line.jp:8000",faucetUrl:"https://ol-catapult-faucet.herokuapp.com/"},this.balanceHeaders=[{text:"",value:"currency",align:"center"},{text:"",value:"amount",align:"center"}],this.historyHeaders=[{text:"amount",value:"amount"},{text:"txHash",value:"hash"},{text:"date",value:"date"}],this.isHistoryLoading=!1,this.pagination={descending:!0,itemsPerPage:-1},this.transactionHistory=[],this.aggregateConsigHeaders=[{text:"distributer",value:"distributerAddress"},{text:"get nem amount",value:"distributerGetAmount"},{text:"asset receiver",value:"receiverAddress"},{text:"asset",value:"receiverGetCurrency"},{text:"asset amount",value:"receiverGetAmount"},{text:"deadline",value:"deadline"}],this.isAggregateConsigLoading=!1,this.aggregateConsigs=[]}onValueChange(t,e){this.qrJson=A.qrJson(2,2,"nem2-wallet",t,0,"")}mounted(){m["d"].prototype.$toast("Hello NEM2 wallet"),this.configure(),this.onLogin()}async configure(){try{this.wallet=await this.loadWalletUseCase.execute(),this.onLoadBalance(),this.onLoadTransactionHistory(),this.onLoadAggregateConsigList()}catch(t){console.error(t)}}async onLogin(){f["auth"]().onAuthStateChanged(async t=>{if(null==t){const t=await f["auth"]().signInAnonymously();console.log("onLogin","new user",t)}else console.log("onLogin","already exist user",t)})}async onLoadBalance(){this.$store.commit("startLoading");try{if(null===this.wallet)return;this.assets=await this.loadBalanceUseCase.execute(this.wallet.address),console.log("balance",this.assets),0!==this.assets.length&&(this.sendAsset.mosaicId=this.assets[0].mosaicId)}catch(t){console.error("balance",t)}this.$store.commit("stopLoading")}async onSend(){this.$store.commit("startLoading");try{if(this.resultMessage="",0!==this.validation().length)throw new Error("Cloud not send coin.");this.sendAsset.relativeAmount=Number(this.sendAsset.relativeAmount);const e=await this.sendCoinUseCase.execute(this.sendAsset);console.log("sendAsset",e),this.resultMessage=`SUCCESS: ${e.hash}`}catch(t){console.error("sendAsset",t),this.resultMessage=`FAILED: ${t.message}`}m["d"].prototype.$toast(this.resultMessage),this.$store.commit("stopLoading")}onClickAsset(t){console.log("onClickAsset",t),this.sendAsset.mosaicId=t.mosaicId,this.sendAsset.divisibility=t.divisibility}onClickHistory(t){console.log("onClickHistory",t)}async onLoadTransactionHistory(t=!1){this.isHistoryLoading=!0;try{!0===t&&(this.transactionHistory=[],this.nextPagingTransactionId=void 0);const s=await this.loadTransactionHistoryUseCase.executeTransferHistoryAll(30,this.nextPagingTransactionId);console.log("history",s),0!==s.histories.length&&(this.nextPagingTransactionId=s.nextPagingTransactionId),this.transactionHistory.push(...s.histories)}catch(e){console.error("onLoadTransactionHistory",e)}this.isHistoryLoading=!1}onClickAggregateConsig(t){console.log("onClickAggregateConsig",t)}async onLoadAggregateConsigList(t=!1){this.isAggregateConsigLoading=!0;try{const t=await this.assetExchangeUseCase.loadAggregateBondedTransactions(100,void 0);this.aggregateConsigs=t.consigs}catch(e){console.error("onLoadAggregateConsigList",e)}this.isAggregateConsigLoading=!1}validation(){return this.errorMessages=[],console.log(this.sendAsset),40!==this.sendAsset.address.length&&this.errorMessages.push('Address (except "-") is 40 characters'),/^[a-zA-Z0-9-]+$/.test(this.sendAsset.address)||this.errorMessages.push("Invalid input"),void 0!==this.sendAsset.message&&this.sendAsset.message.length>1024&&this.errorMessages.push("Maximum number of characters in message has exceeded"),this.errorMessages}addressLabel(t){return this.wallet.address===t?"YOU":t}clear(){this.sendAsset.clear()}};g["__decorate"]([Object(m["b"])("LoadBalanceUseCase")],_.prototype,"loadBalanceUseCase",void 0),g["__decorate"]([Object(m["b"])("LoadWalletUseCase")],_.prototype,"loadWalletUseCase",void 0),g["__decorate"]([Object(m["b"])("SendCoinUseCase")],_.prototype,"sendCoinUseCase",void 0),g["__decorate"]([Object(m["b"])("LoadTransactionHistoryUseCase")],_.prototype,"loadTransactionHistoryUseCase",void 0),g["__decorate"]([Object(m["b"])("AssetExchangeUseCase")],_.prototype,"assetExchangeUseCase",void 0),g["__decorate"]([Object(m["e"])("wallet.address")],_.prototype,"onValueChange",null),_=g["__decorate"]([Object(m["a"])({name:"HomePage",computed:Object(p["b"])(["isLoading"]),filters:{dateFormat(t){return Object(v["format"])(t,"YYYY/MM/DD HH:mm:ss")}}})],_);var x=_,C=x,H=(s("78ec"),Object(i["a"])(C,h,u,!1,null,"0c6a9dfc",null)),k=H.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"transactionpage"},[null!==t.transactionHistory?s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-flex",[s("div",{staticStyle:{margin:"8px"}},[s("h2",[t._v("Transaction detail")])]),s("table",{staticClass:"table__list",attrs:{border:"1"}},[s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("id")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.id))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("hash")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.hash))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("fromAddress")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.fromAddress))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("toAddress")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.toAddress))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("amount")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.amount))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("fee")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.fee))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("message")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t.transactionHistory.message))])]),s("tr",[s("td",{staticClass:"table__key",attrs:{width:"30%"}},[t._v("date")]),s("td",{staticClass:"table__value",attrs:{width:"70%"}},[t._v(t._s(t._f("dateFormat")(t.transactionHistory.date)))])])])])],1):t._e()],1)},N=[];let S=class extends m["d"]{constructor(){super(...arguments),this.transactionHistory=null}mounted(){this.configure(),console.log(this.transactionId)}async configure(){this.onLoadTransactionHistory()}async onLoadTransactionHistory(){if(this.$store.commit("startLoading"),void 0!==this.transactionId){try{this.transactionHistory=await this.loadTransactionHistoryUseCase.executeTransferHistory(this.transactionId),console.log(this.transactionHistory)}catch(t){console.error(t)}this.$store.commit("stopLoading")}}};g["__decorate"]([Object(m["b"])("LoadTransactionHistoryUseCase")],S.prototype,"loadTransactionHistoryUseCase",void 0),g["__decorate"]([Object(m["c"])()],S.prototype,"transactionId",void 0),S=g["__decorate"]([Object(m["a"])({name:"TransactionPage",computed:Object(p["b"])(["isLoading"]),filters:{dateFormat(t){return Object(v["format"])(t,"YYYY/MM/DD HH:mm:ss")}}})],S);var I=S,O=I,L=(s("00c6"),Object(i["a"])(O,T,N,!1,null,"5005f862",null)),M=L.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"assetexchangepage"},[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-flex",{staticStyle:{"margin-top":"8px"}},[s("h1",[t._v("Asset exchange")])]),s("v-flex",{staticStyle:{"margin-top":"8px"}},[s("v-card",[s("v-card-actions",[s("v-card-title",[s("h4",[t._v("Asset list")])]),s("v-spacer"),s("v-btn",{attrs:{fab:"",small:"",text:"",loading:t.isLoading},on:{click:function(e){return t.onLoadAssetList()}}},[s("v-icon",[t._v("cached")])],1)],1),0!==t.assetList.length?s("v-flex",{staticStyle:{margin:"0 16px"}},[s("v-data-table",{attrs:{headers:t.headers,items:t.assetList,options:t.pagination,"hide-default-footer":"","no-data-text":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){return[s("tr",{staticClass:"asset--list__value",on:{click:function(s){return t.onClickAssetList(e.item)}}},[s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.namespace))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.mosaicId))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.creatorAddress))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(e.item.exchangeAmount))]),s("td",{attrs:{width:"20%"}},[t._v(t._s(t._f("dateFormat")(e.item.createdAt.toDate())))])])]}}],null,!1,1756583265)})],1):t._e(),s("v-card-actions",[s("v-card-title",[s("h4",[t._v("Exchange")])])],1),s("v-form",{staticStyle:{margin:"0 26px"}},[s("v-text-field",{attrs:{label:"asset name",placeholder:"Asset1",disabled:""},model:{value:t.exchangeAssetForm.name,callback:function(e){t.$set(t.exchangeAssetForm,"name",e)},expression:"exchangeAssetForm.name"}}),s("v-text-field",{attrs:{label:"exchange NEM amount",type:"number",disabled:""},model:{value:t.exchangeAssetForm.exchangeNemAmount,callback:function(e){t.$set(t.exchangeAssetForm,"exchangeNemAmount",e)},expression:"exchangeAssetForm.exchangeNemAmount"}}),s("v-text-field",{attrs:{label:"get amount",type:"number",required:""},model:{value:t.exchangeAssetForm.amount,callback:function(e){t.$set(t.exchangeAssetForm,"amount",e)},expression:"exchangeAssetForm.amount"}})],1),s("v-flex",{staticStyle:{"padding-bottom":"20px"}},[s("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onExchangeAsset()}}},[t._v("EXCHANGE")])],1)],1)],1),s("v-flex",{staticStyle:{"margin-top":"24px"}},[s("h1",[t._v("Create asset")])]),s("v-flex",{staticStyle:{"margin-top":"8px"}},[s("v-card",[s("v-card-actions",[s("v-card-title",[s("h4",[t._v("Create")])])],1),s("v-form",{staticStyle:{margin:"0 26px"}},[s("v-text-field",{attrs:{label:"name",placeholder:"shohei-ticket",required:""},model:{value:t.assetForm.name,callback:function(e){t.$set(t.assetForm,"name",e)},expression:"assetForm.name"}}),s("v-text-field",{attrs:{label:"supply max amount",type:"number",required:""},model:{value:t.assetForm.maxAmount,callback:function(e){t.$set(t.assetForm,"maxAmount",e)},expression:"assetForm.maxAmount"}}),s("v-text-field",{attrs:{label:"exchange NEM amount",type:"number",required:""},model:{value:t.assetForm.exchangeNemAmount,callback:function(e){t.$set(t.assetForm,"exchangeNemAmount",e)},expression:"assetForm.exchangeNemAmount"}})],1),s("v-flex",{staticStyle:{"padding-bottom":"20px"}},[s("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onCreateAsset()}}},[t._v("CREATE")])],1)],1)],1)],1)],1)},F=[];class P{constructor(t,e,s,a,n,o,i){this.namespace=t,this.maxAmount=e,this.exchangeAmount=s,this.supplyMutable=a,this.transferable=n,this.divisibility=o,this.durationCount=i}}let E=class extends m["d"]{constructor(){super(...arguments),this.assetList=[],this.headers=[{text:"namespace",value:"namespace",align:"center"},{text:"assetId",value:"mosaicId",align:"center"},{text:"distributer",value:"creatorAddress",align:"center"},{text:"need NEM",value:"exchangeAmount",align:"center"},{text:"createdAt",value:"createdAt",align:"center"}],this.pagination={descending:!0,itemsPerPage:-1},this.exchangeAssetForm={name:"",assetId:"",amount:0,exchangeNemAmount:0},this.assetForm={name:"",maxAmount:0,exchangeNemAmount:0}}mounted(){this.configure()}async configure(){await this.onLoadAssetList()}onClickAssetList(t){console.log("onClickAssetList",t),this.setExchangeForm(t)}async onExchangeAsset(){this.$store.commit("startLoading");let t="";try{const s=this.exchangeAssetForm.assetId,a=this.assetList.filter(t=>t.mosaicId===s)[0],n=Number(this.exchangeAssetForm.exchangeNemAmount),o=Number(this.exchangeAssetForm.amount);console.log("onExchangeAsset",n,a.creatorPublicKey,o,s),t=await this.assetExchangeUseCase.exchangeAsset(n,a.creatorPublicKey,o,s)}catch(e){console.error("onExchangeAsset",e),t=e.message}m["d"].prototype.$toast(t),this.$store.commit("stopLoading")}async onCreateAsset(){this.$store.commit("startLoading");let t="";try{const s=this.assetForm.name,a=Number(this.assetForm.maxAmount),n=Number(this.assetForm.exchangeNemAmount),o=new P(s,a,n,!0,!0,0);console.log("onCreateAsset",o),t=await this.assetExchangeUseCase.createAsset(o),this.clearForm(),this.onLoadAssetList()}catch(e){console.error("onCreateAsset",e),t=e.message}m["d"].prototype.$toast(t),this.$store.commit("stopLoading")}async onLoadAssetList(){this.$store.commit("startLoading");try{this.assetList=await this.assetExchangeUseCase.loadAssetList(),0!==this.assetList.length&&this.setExchangeForm(this.assetList[0])}catch(t){console.error("onLoadAssetList",t)}this.$store.commit("stopLoading")}setExchangeForm(t){this.exchangeAssetForm.name=t.namespace,this.exchangeAssetForm.assetId=t.mosaicId,this.exchangeAssetForm.exchangeNemAmount=t.exchangeAmount}clearForm(){this.assetForm={name:"",maxAmount:0,exchangeNemAmount:0}}};g["__decorate"]([Object(m["b"])("AssetExchangeUseCase")],E.prototype,"assetExchangeUseCase",void 0),E=g["__decorate"]([Object(m["a"])({name:"AssetExchangePage",computed:Object(p["b"])(["isLoading"]),filters:{dateFormat(t){return Object(v["format"])(t,"YYYY/MM/DD HH:mm:ss")}}})],E);var K=E,R=K,U=(s("5bec"),Object(i["a"])(R,j,F,!1,null,"10f7cac0",null)),$=U.exports;a["default"].use(d["a"]);var D=new d["a"]({mode:"history",base:"/nem2-wallet/",routes:[{path:"/",name:"home_page",component:k},{path:"/transaction_page/:transactionId",name:"transaction_page",component:M,props:!0},{path:"/asset_exchange_page",name:"asset_exchange_page",component:$}]});a["default"].use(p["a"]);var B=new p["a"].Store({state:{isLoading:!1},mutations:{stopLoading(t){t.isLoading=!1},startLoading(t){t.isLoading=!0}},actions:{}}),W=s("9483");Object(W["a"])("/nem2-wallet/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});s("cc20");var G=s("7869"),q=s.n(G),J=s("6112"),Y=s.n(J);class V{constructor(t,e){this.walletRepository=t,this.namespaceRepository=e}async execute(t){try{return await this.walletRepository.loadBalance(t)}catch(e){throw e}}}class z{constructor(t){this.repository=t}async execute(){const t=await this.repository.loadWallet();return void 0!==t?t:await this.repository.createWallet()}}class Q{constructor(t,e){this.transactionRepository=t,this.walletRepository=e}async execute(t){try{const s=await this.walletRepository.loadWallet(),a=s.privateKey;return await this.transactionRepository.sendAsset(a,t)}catch(e){throw e}}}class X{constructor(t,e){this.transactionRepository=t,this.walletRepository=e}async executeTransferHistory(t){try{return await this.transactionRepository.transactionHistory(t)}catch(e){throw e}}async executeTransferHistoryAll(t,e){try{const a=await this.walletRepository.loadWallet(),n=a.publicKey;return await this.transactionRepository.transactionHistoryAll(n,t,e)}catch(s){throw s}}}class Z{constructor(t,e,s,a,n){this.receiverPrivateKey=t,this.exchangeNemAmount=e,this.distributorPublicKey=s,this.distributeRawAmount=a,this.distributeAssetId=n}}var tt=s("d2f4");class et extends tt["Doc"]{static modelName(){return et.collectionName}modelName(){return et.collectionName}}et.collectionName="asset",g["__decorate"]([tt["Field"]],et.prototype,"uid",void 0),g["__decorate"]([tt["Field"]],et.prototype,"namespace",void 0),g["__decorate"]([tt["Field"]],et.prototype,"mosaicId",void 0),g["__decorate"]([tt["Field"]],et.prototype,"exchangeAmount",void 0),g["__decorate"]([tt["Field"]],et.prototype,"creatorAddress",void 0),g["__decorate"]([tt["Field"]],et.prototype,"creatorPublicKey",void 0);class st{constructor(t,e,s,a,n){this.transactionRepository=t,this.walletRepository=e,this.aggregateRepository=s,this.mosaicRepository=a,this.namespaceRepository=n}async createAsset(t){let e;try{console.log("asset",t);const a=await this.walletRepository.loadWallet();if(void 0===a)throw new Error("wallet is nothing..");const n=a.privateKey,o=a.address,i=a.publicKey,r=t.namespace,c=t.exchangeAmount,l=await this.walletRepository.loadAccount(o);console.log("account",l.mosaics);const d=await this.namespaceRepository.loadNamespace(r);if(console.log("status",d),void 0!==d)return"Already exist namespace.";const h=await this.namespaceRepository.createNamespaceTxAggregate(n,r,100);console.log("namespaceTxAggregate",h);const u=await this.mosaicRepository.createMosaicDefinitionTxAggregate(n,t),g=u.mosaicId;console.log("mosaicDefinitionTxAggregate",u);const m=await this.mosaicRepository.createMosaicSupplyChangeTxAggregate(n,g,t.maxAmount);console.log("mosaicSupplyChangeTxAggregate",m);const p=await this.namespaceRepository.createMosaicToNamespaceTxAggregate(n,r,g);console.log("mosaicToNamespaceTxAggregate",p);const v=await this.aggregateRepository.requestComplete(n,[h,u.aggregate,m,p]);e=`SUCCESS: ${v.hash}`,console.log("result",e);const b=new et;b.uid=b.id,b.namespace=r,b.mosaicId=g,b.exchangeAmount=c,b.creatorAddress=o,b.creatorPublicKey=i,await b.save(),console.log("save")}catch(s){throw s}return e}async loadAssetList(){let t=[];try{const s=tt["firestore"].collection(et.collectionReference().path).orderBy("createdAt","desc"),a=await s.get();t=a.docs.filter(t=>t.exists).map(t=>et.fromSnapshot(t)),console.log("loadAssetList",t)}catch(e){throw e}return t}async exchangeAsset(t,e,s,a){let n;try{const i=await this.walletRepository.loadWallet(),r=i.privateKey,c=await this.mosaicRepository.loadMosaicInfo(a),l=s*Math.pow(10,c.divisibility),d=new Z(r,t,e,l,a),h=await this.aggregateRepository.requestAggregateEscrowAsset(d);n=`SUCCESS: ${h.hash}`,console.log("aggregateEscrowAsset",n)}catch(o){throw o}return n}async consigAggregate(t){let e;try{const a=await this.walletRepository.loadWallet(),n=a.privateKey,o=await this.aggregateRepository.consigAggregate(n,t);e=o.message,console.log("consigAggregate",e)}catch(s){throw s}return e}async consigAggregateAll(){let t;try{const s=await this.walletRepository.loadWallet(),a=s.privateKey,n=await this.aggregateRepository.consigAggregateAll(a);t=n.message,console.log("consigAggregate",t)}catch(e){throw e}return t}async loadAggregateBondedTransactions(t,e){let s;try{const n=await this.walletRepository.loadWallet(),o=n.privateKey;s=await this.aggregateRepository.aggregateBondedTransactions(o,t,e),console.log("loadAggregateBondedTransactions",s)}catch(a){throw a}return s}}var at=s("db6a"),nt=s("a002"),ot=s.n(nt),it=s("1758"),rt=s("ebb6"),ct=s("a6c5");class lt{constructor(t,e,s,a){this.address=t,this.publicKey=e,this.privateKey=s,this.networkType=a}toJSON(){return{address:this.address,publicKey:this.publicKey,privateKey:this.privateKey,networkType:this.networkType}}}class dt{constructor(t,e,s,a,n){this.mosaicId=t,this.relativeAmount=e,this.divisibility=s,this.rawValue=a,this.namespace=n}}class ht{constructor(t){this.nemNode=t,this.accountHttp=new at["AccountHttp"](t.endpoint),this.mosaicHttp=new at["MosaicHttp"](t.endpoint),this.mosaicService=new at["MosaicService"](this.accountHttp,this.mosaicHttp),this.localStorageKey="nem2-wallet"}async createWallet(){const t=at["Account"].generateNewAccount(this.nemNode.network),e=new lt(t.address.plain(),t.publicKey,t.privateKey,t.address.networkType.valueOf());return await ot.a.setItem(this.localStorageKey,e.toJSON()),e}async loadWallet(){const t=await ot.a.getItem(this.localStorageKey);return null!==t?new lt("address"in t?t.address:void 0,"publicKey"in t?t.publicKey:void 0,"privateKey"in t?t.privateKey:void 0,"networkType"in t?t.networkType:void 0):void 0}async loadAccount(t){const e=at["Address"].createFromRawAddress(t);return new Promise((t,s)=>{this.accountHttp.getAccountInfo(e).subscribe(e=>{e.mosaics.forEach(t=>{console.log("mosaic",t.id.toHex(),t.amount.compact())}),t(e)},t=>s(t))})}async loadBalance(t){return new Promise((e,s)=>{const a=at["Address"].createFromRawAddress(t);this.mosaicService.mosaicsAmountViewFromAddress(a).pipe(Object(it["a"])(),Object(rt["a"])(t=>t.map(t=>new dt(t.fullName(),t.relativeAmount(),t.mosaicInfo.divisibility,t)))).subscribe(t=>e(t),t=>s(t))})}async loadBalanceAndNamespace(t){return new Promise((e,s)=>{const a=at["Address"].createFromRawAddress(t);this.mosaicService.mosaicsAmountViewFromAddress(a).pipe(Object(it["a"])(),Object(rt["a"])(t=>{const e=t.map(t=>t.mosaicInfo.mosaicId);return console.log("mosaicIds",e),this.mosaicHttp.getMosaicsNames(e)}),Object(ct["a"])(t=>t)).subscribe(t=>{console.log(t),e(t)},t=>console.error(t))})}}var ut=s("f74f"),gt=s("17f5"),mt=s("5670"),pt=s("f59d");class vt{constructor(t,e){this.message=t,this.hash=e}}class bt{constructor(t,e){this.message=t,this.hash=e}}class wt{constructor(t){this.endpoint=t,this.listener=new at["Listener"](this.endpoint,WebSocket)}async loadStatus(t,e){try{return await this._loadStatus(t,e)}catch(s){throw s}}_loadStatus(t,e){return new Promise((s,a)=>{const n=at["Address"].createFromRawAddress(t);this.listener.open().then(()=>{this.listener.status(n).pipe(Object(mt["a"])(t=>t.hash===e),Object(rt["a"])(t=>new bt(t.status,t.hash))).subscribe(t=>{console.error("loadStatus status",t),a(t)}),this.listener.unconfirmedAdded(n).pipe(Object(mt["a"])(t=>void 0!==t.transactionInfo&&t.transactionInfo.hash===e),Object(rt["a"])(t=>new vt("SUCCESS",t.transactionInfo.hash))).subscribe(t=>{console.log("loadStatus unconfirmedAdded",t),s(t)},t=>console.error("loadStatus unconfirmedAdded",t)),this.listener.confirmed(n).subscribe(t=>console.log("loadStatus confirmed",t),t=>console.error("loadStatus confirmed",t))})})}}class yt{constructor(t,e,s,a,n,o,i,r,c){this.id=t,this.amount=e,this.fee=s,this.toAddress=a,this.fromAddress=n,this.message=o,this.date=i,this.hash=r,this.rawValue=c}}class At{constructor(t,e=[]){this.nextPagingTransactionId=t,this.histories=e}}class ft{constructor(t){this.nemNode=t,this.accountHttp=new at["AccountHttp"](t.endpoint),this.transactionHttp=new at["TransactionHttp"](t.endpoint),this.blockHttp=new at["BlockHttp"](t.endpoint),this.listenerWrapper=new wt(t.wsEndpoint),this.mosaicHttp=new at["MosaicHttp"](t.endpoint),this.namespaceHttp=new at["NamespaceHttp"](t.endpoint)}async sendAsset(t,e){const s=at["Address"].createFromRawAddress(e.address);console.log(e.getRawAmount());const a=at["TransferTransaction"].create(at["Deadline"].create(),s,[new at["Mosaic"](new at["MosaicId"](e.mosaicId),at["UInt64"].fromUint(e.getRawAmount()))],void 0!==e.message?at["PlainMessage"].create(e.message):at["PlainMessage"].create(""),this.nemNode.network),n=at["Account"].createFromPrivateKey(t,this.nemNode.network),o=n.sign(a,this.nemNode.networkGenerationHash);return new Promise((t,e)=>{this.listenerWrapper.loadStatus(n.address.plain(),o.hash).then(e=>t(e)).catch(t=>e(t)),this.transactionHttp.announce(o).subscribe(t=>console.log(t),t=>e(t))})}async transactionHistory(t){return new Promise((e,s)=>{let a;this.transactionHttp.getTransaction(t).pipe(Object(rt["a"])(t=>{return console.log("transactionHistory",t),t}),Object(mt["a"])(t=>t instanceof at["TransferTransaction"]),Object(rt["a"])(t=>{return a=t,a}),Object(rt["a"])(t=>this.blockHttp.getBlockByHeight(t.transactionInfo.height.compact())),Object(ct["a"])(t=>t),Object(rt["a"])(t=>new yt(a.transactionInfo.id,0!==a.mosaics.length?a.mosaics[0].amount.compact()/A.divisibility():0,a.maxFee.compact(),a.recipient instanceof at["Address"]?a.recipient.plain():"",void 0!==a.signer?a.signer.address.plain():"",a.message.payload,void 0!==t?new Date(t.timestamp.compact()+Date.UTC(2016,3,1,0,0,0,0)):void 0,a.transactionInfo.hash,a))).subscribe(t=>e(t),t=>s(t))})}async transactionHistoryAll(t,e,s){try{const n=at["PublicAccount"].createFromPublicKey(t,this.nemNode.network);return await this._transactionHistory(n,new at["QueryParams"](e,s,at["Order"].DESC))}catch(a){throw a}}async unconfirmedTransactions(t,e,s){return new Promise((a,n)=>{const o=at["PublicAccount"].createFromPublicKey(t,this.nemNode.network);this.accountHttp.unconfirmedTransactions(o,new at["QueryParams"](e,s,at["Order"].DESC)).pipe(Object(rt["a"])(t=>{return console.log("unconfirmedTransactions",t),t})).subscribe(t=>a(t),t=>n(t))})}_transactionHistory(t,e){return new Promise((s,a)=>{let n,o=[];this.accountHttp.transactions(t,e).pipe(Object(rt["a"])(t=>{return 0===t.length&&s(new At(void 0)),t}),Object(ct["a"])(t=>o=t.filter(t=>t instanceof at["TransferTransaction"]).map(t=>t).filter(t=>void 0!==t.transactionInfo&&t.transactionInfo instanceof at["TransactionInfo"])),Object(ct["a"])(t=>{return Object(ut["b"])(Object(gt["a"])(t),this.blockHttp.getBlockByHeight(t.transactionInfo.height.compact()),t.mosaics[0].id instanceof at["MosaicId"]?this.mosaicHttp.getMosaic(new at["MosaicId"](t.mosaics[0].id.toHex())).pipe(Object(rt["a"])(t=>t.divisibility),Object(pt["a"])(t=>Object(gt["a"])(0))):Object(gt["a"])(6))}),Object(rt["a"])(([t,e,s])=>{return Object(gt["a"])(new yt(t.transactionInfo.id,0!==t.mosaics.length?t.mosaics[0].amount.compact()/Math.pow(10,s):0,t.maxFee.compact(),t.recipient instanceof at["Address"]?t.recipient.plain():"",void 0!==t.signer?t.signer.address.plain():"",t.message.payload,void 0!==t?new Date(e.timestamp.compact()+Date.UTC(2016,3,1,0,0,0,0)):void 0,t.transactionInfo.hash,t))}),Object(it["a"])(),Object(rt["a"])(t=>{return n=o.slice(-1)[0].transactionInfo.id,new At(n,t.sort((t,e)=>{const s=t.date.getTime(),a=e.date.getTime();return s>a?-1:s<a?1:0}))})).subscribe(t=>s(t),t=>a(t))})}}class _t{constructor(t,e=[]){this.nextPagingTransactionId=t,this.consigs=e}}class xt{constructor(){this.distributerGetCurrency="",this.distributerGetAmount=0,this.distributerAddress="",this.receiverGetCurrency="",this.receiverGetAmount=0,this.receiverAddress="",this.deadline=void 0,this.aggregateTransaction=void 0}}class Ct{constructor(t,e){this.mosaicId=t,this.divisibility=e}}var Ht=s("f551");class kt{constructor(t){this.nemNode=t,this.accountHttp=new at["AccountHttp"](t.endpoint),this.transactionHttp=new at["TransactionHttp"](t.endpoint),this.mosaicHttp=new at["MosaicHttp"](t.endpoint),this.listenerWrapper=new wt(t.wsEndpoint)}async requestComplete(t,e){return new Promise((s,a)=>{const n=at["Account"].createFromPrivateKey(t,this.nemNode.network),o=at["AggregateTransaction"].createComplete(at["Deadline"].create(),e,this.nemNode.network,[]),i=n.sign(o,this.nemNode.networkGenerationHash);this.listenerWrapper.loadStatus(n.address.plain(),i.hash).then(t=>s(t)).catch(t=>a(t)),this.transactionHttp.announce(i).subscribe(t=>console.log("request",t),t=>a(t))})}async requestAggregateEscrowAsset(t){return new Promise((e,s)=>{const a=at["Account"].createFromPrivateKey(t.receiverPrivateKey,this.nemNode.network),n=at["PublicAccount"].createFromPublicKey(t.distributorPublicKey,this.nemNode.network),o=at["Deadline"].create(23,Ht["ChronoUnit"].HOURS),i=at["TransferTransaction"].create(o,n.address,[at["NetworkCurrencyMosaic"].createRelative(t.exchangeNemAmount)],at["PlainMessage"].create(`send ${t.exchangeNemAmount} currency to distributor`),this.nemNode.network),r=at["TransferTransaction"].create(o,a.address,[new at["Mosaic"](new at["MosaicId"](t.distributeAssetId),at["UInt64"].fromUint(t.distributeRawAmount))],at["PlainMessage"].create(`send ${t.distributeRawAmount} (${t.distributeAssetId}) to receiver`),this.nemNode.network),c=at["AggregateTransaction"].createBonded(o,[i.toAggregate(a.publicAccount),r.toAggregate(n)],this.nemNode.network),l=a.sign(c,this.nemNode.networkGenerationHash);console.log("Aggregate Transaction: ",l.hash);const d=at["HashLockTransaction"].create(at["Deadline"].create(),at["NetworkCurrencyMosaic"].createRelative(10),at["UInt64"].fromUint(480),l,this.nemNode.network),h=a.sign(d,this.nemNode.networkGenerationHash);this.listenerWrapper.listener.open().then(()=>{this.transactionHttp.announce(h).subscribe(t=>{console.log("hashLockTransactionSigned",t)},t=>s(t)),this.listenerWrapper.listener.confirmed(a.address).pipe(Object(rt["a"])(t=>{return console.log("listener confirmed",t),t}),Object(mt["a"])(t=>void 0!==t.transactionInfo&&t.transactionInfo.hash===h.hash),Object(ct["a"])(t=>this.transactionHttp.announceAggregateBonded(l)),Object(rt["a"])(t=>new vt("SUCCESS",h.hash))).subscribe(t=>e(t),t=>{console.error("listener confirmed",t),s(t)})}).catch(t=>s(t))})}async consigAggregate(t,e){return new Promise((s,a)=>{const n=(t,e)=>{const s=at["CosignatureTransaction"].create(t);return e.signCosignatureTransaction(s)},o=at["Account"].createFromPrivateKey(t,this.nemNode.network),i=n(e.aggregateTransaction,o);this.transactionHttp.announceAggregateBondedCosignature(i).pipe(Object(rt["a"])(t=>new vt("SUCCESS",i.parentHash))).subscribe(t=>s(t),t=>a(t))})}async consigAggregateAll(t){return new Promise((e,s)=>{const a=(t,e)=>{const s=at["CosignatureTransaction"].create(t);return e.signCosignatureTransaction(s)},n=at["Account"].createFromPrivateKey(t,this.nemNode.network);this.accountHttp.aggregateBondedTransactions(n.publicAccount).pipe(Object(ct["a"])(t=>t),Object(mt["a"])(t=>!t.signedByAccount(n.publicAccount)),Object(rt["a"])(t=>a(t,n)),Object(ct["a"])(t=>this.transactionHttp.announceAggregateBondedCosignature(t)),Object(rt["a"])(t=>new vt("SUCCESS"))).subscribe(t=>e(t),t=>s(t))})}async aggregateBondedTransactions(t,e,s){return new Promise((a,n)=>{const o=at["Account"].createFromPrivateKey(t,this.nemNode.network);let i,r;this.accountHttp.aggregateBondedTransactions(o.publicAccount,new at["QueryParams"](e,s,at["Order"].DESC)).pipe(Object(rt["a"])(t=>{return console.log("aggregateBondedTransactions",t),0===t.length&&a(new _t(void 0)),i=new _t(t.slice(-1)[0].transactionInfo.id),t}),Object(ct["a"])(t=>t),Object(rt["a"])(t=>{return r=t,t.innerTransactions.filter(t=>t instanceof at["TransferTransaction"]).map(t=>t)}),Object(mt["a"])(t=>2===t.length),Object(ct["a"])(t=>{const e=t[0].mosaics[0].id,s=t[1].mosaics[0].id;return Object(ut["b"])(Object(gt["a"])(t),e instanceof at["MosaicId"]?this.mosaicHttp.getMosaic(new at["MosaicId"](e.toHex())).pipe(Object(rt["a"])(t=>new Ct(e.toHex(),t.divisibility)),Object(pt["a"])(t=>Object(gt["a"])(new Ct(e.toHex(),0)))):Object(gt["a"])(new Ct(e.toHex(),6)),s instanceof at["MosaicId"]?this.mosaicHttp.getMosaic(new at["MosaicId"](s.toHex())).pipe(Object(rt["a"])(t=>new Ct(s.toHex(),t.divisibility)),Object(pt["a"])(t=>Object(gt["a"])(new Ct(s.toHex(),0)))):Object(gt["a"])(new Ct(s.toHex(),6)))}),Object(rt["a"])(([t,e,s])=>{console.log("txs",t);const a=new xt;return a.aggregateTransaction=r,a.deadline=new Date(r.deadline.value.atZone(Ht["ZoneId"].SYSTEM).toInstant().toEpochMilli()),t.forEach((t,n)=>{if(t.recipient instanceof at["Address"]){const i=t.recipient;let r=0;r=t.mosaics[0].id.toHex()===e.mosaicId?e.divisibility:s.divisibility,console.log(o.publicAccount.address.plain(),i.plain(),t.message.payload),0===n?(a.receiverAddress=i.plain(),a.distributerGetAmount=t.mosaics[0].amount.compact()/Math.pow(10,r),a.distributerGetCurrency=t.mosaics[0].id.toHex()):(a.distributerAddress=i.plain(),a.receiverGetAmount=t.mosaics[0].amount.compact()/Math.pow(10,r),a.receiverGetCurrency=t.mosaics[0].id.toHex())}}),Object(gt["a"])(a)}),Object(it["a"])(),Object(rt["a"])(t=>{return i.consigs=t,i})).subscribe(t=>a(t),t=>n(t))})}}class Tt{constructor(t,e,s,a,n){this.mosaicId=t,this.ownerAddress=e,this.ownerPublicKey=s,this.divisibility=a,this.hash=n}}class Nt{constructor(t,e){this.mosaicId=t,this.aggregate=e}}class St{constructor(t){this.nemNode=t,this.mosaicHttp=new at["MosaicHttp"](t.endpoint),this.transactionHttp=new at["TransactionHttp"](t.endpoint),this.listenerWrapper=new wt(t.wsEndpoint)}async loadMosaicInfo(t){return new Promise((e,s)=>{this.mosaicHttp.getMosaic(new at["MosaicId"](t)).pipe(Object(rt["a"])(e=>new Tt(t,e.owner.address.plain(),e.owner.publicKey,e.divisibility))).subscribe(t=>e(t),t=>s(t))})}async createMosaic(t,e){return new Promise((s,a)=>{const n=at["Account"].createFromPrivateKey(t,this.nemNode.network),o=this._createMosaicDefinitionTx(t,e).transaction,i=this._createMosaicSupplyChangeTx(o.mosaicId.toHex(),e.maxAmount),r=at["AggregateTransaction"].createComplete(at["Deadline"].create(),[o.toAggregate(n.publicAccount),i.toAggregate(n.publicAccount)],this.nemNode.network,[]),c=n.sign(r,this.nemNode.networkGenerationHash);this.listenerWrapper.loadStatus(n.address.plain(),c.hash).then(t=>s(new Tt(o.mosaicId.toHex(),n.address.plain(),n.publicAccount.publicKey,e.divisibility,t.hash))).catch(t=>a(t)),this.transactionHttp.announce(c).subscribe(t=>console.log("createMosaic",t,o.mosaicId),t=>a(t))})}createMosaicDefinitionTxAggregate(t,e){const s=at["Account"].createFromPrivateKey(t,this.nemNode.network),a=this._createMosaicDefinitionTx(t,e);return new Nt(a.mosaicId,a.transaction.toAggregate(s.publicAccount))}createMosaicSupplyChangeTxAggregate(t,e,s){const a=at["Account"].createFromPrivateKey(t,this.nemNode.network);return this._createMosaicSupplyChangeTx(e,s).toAggregate(a.publicAccount)}_createMosaicDefinitionTx(t,e){const s=at["Account"].createFromPrivateKey(t,this.nemNode.network),a=at["MosaicNonce"].createRandom(),n=at["MosaicId"].createFromNonce(a,s.publicAccount),o=at["MosaicDefinitionTransaction"].create(at["Deadline"].create(),a,n,at["MosaicProperties"].create({supplyMutable:e.supplyMutable,transferable:e.transferable,divisibility:e.divisibility,duration:void 0!==e.durationCount?at["UInt64"].fromUint(e.durationCount):void 0}),this.nemNode.network);return{mosaicId:n.toHex(),transaction:o}}_createMosaicSupplyChangeTx(t,e){const s=at["MosaicSupplyChangeTransaction"].create(at["Deadline"].create(),new at["MosaicId"](t),at["MosaicSupplyType"].Increase,at["UInt64"].fromUint(e),this.nemNode.network);return s}}class It{constructor(t,e,s,a){this.namespace=t,this.namespaceId=e,this.ownerAddress=s,this.ownerPublicKey=a}}class Ot{constructor(t){this.nemNode=t,this.transactionHttp=new at["TransactionHttp"](t.endpoint),this.namespaceHttp=new at["NamespaceHttp"](t.endpoint),this.listenerWrapper=new wt(t.wsEndpoint)}async loadNamespace(t){return new Promise((e,s)=>{const a=new at["NamespaceId"](t);this.namespaceHttp.getNamespace(a).pipe(Object(rt["a"])(t=>{return console.log("item",t),t}),Object(mt["a"])(t=>t.levels.length>0),Object(rt["a"])(e=>new It(t,e.levels[0].toHex(),e.owner.address.plain(),e.owner.publicKey))).subscribe(t=>e(t),t=>{this._errorNotFound(JSON.parse(t.message))?e(void 0):s(t)})})}async loadNamespacesFromAccount(t){return new Promise((e,s)=>{const a=at["Address"].createFromRawAddress(t);this.namespaceHttp.getNamespacesFromAccount(a).pipe(Object(rt["a"])(t=>t.filter(t=>t.levels.length>0).map(t=>new It(name,t.levels[0].toHex(),t.owner.address.plain(),t.owner.publicKey)))).subscribe(t=>{console.log("loadNamespacesFromAccount",t),e(t)},t=>s(t))})}async createNamespace(t,e,s){return new Promise((a,n)=>{const o=this._createNamespaceTx(t,s),i=at["Account"].createFromPrivateKey(e,this.nemNode.network),r=i.sign(o,this.nemNode.networkGenerationHash);this.listenerWrapper.loadStatus(i.address.plain(),r.hash).then(t=>a(t)).catch(t=>n(t)),this.transactionHttp.announce(r).subscribe(t=>console.log(t),t=>n(t))})}async createSubNamespace(t,e,s){return new Promise((a,n)=>{const o=at["RegisterNamespaceTransaction"].createSubNamespace(at["Deadline"].create(),t,e,this.nemNode.network),i=at["Account"].createFromPrivateKey(s,this.nemNode.network),r=i.sign(o,this.nemNode.networkGenerationHash);console.log("createSubNamespace",o,r),this.listenerWrapper.loadStatus(i.address.plain(),r.hash).then(t=>a(t)).catch(t=>n(t)),this.transactionHttp.announce(r).subscribe(t=>console.log(t),t=>n(t))})}async registMosaicToNamespace(t,e,s){return new Promise((a,n)=>{const o=this._createMosaicToNamespaceTx(t,e),i=at["Account"].createFromPrivateKey(s,this.nemNode.network),r=i.sign(o,this.nemNode.networkGenerationHash);this.listenerWrapper.loadStatus(i.address.plain(),r.hash).then(t=>a(t)).catch(t=>n(t)),this.transactionHttp.announce(r).subscribe(t=>console.log("registeMosaicToNamespace",t),t=>n(t))})}async registNamespaceToAddress(t,e,s){return new Promise((a,n)=>{const o=new at["NamespaceId"](t),i=at["Address"].createFromRawAddress(e),r=at["AliasTransaction"].createForAddress(at["Deadline"].create(),at["AliasActionType"].Link,o,i,this.nemNode.network),c=at["Account"].createFromPrivateKey(s,this.nemNode.network),l=c.sign(r,this.nemNode.networkGenerationHash);this.listenerWrapper.loadStatus(c.address.plain(),l.hash).then(t=>a(t)).catch(t=>n(t)),this.transactionHttp.announce(l).subscribe(t=>console.log("registeNamespaceToAddress",r,t),t=>n(t))})}createNamespaceTxAggregate(t,e,s){console.log(t,e);const a=at["Account"].createFromPrivateKey(t,this.nemNode.network);return this._createNamespaceTx(e,s).toAggregate(a.publicAccount)}createMosaicToNamespaceTxAggregate(t,e,s){const a=at["Account"].createFromPrivateKey(t,this.nemNode.network);return this._createMosaicToNamespaceTx(e,s).toAggregate(a.publicAccount)}_createNamespaceTx(t,e){const s=at["RegisterNamespaceTransaction"].createRootNamespace(at["Deadline"].create(),t,at["UInt64"].fromUint(e),this.nemNode.network);return s}_createMosaicToNamespaceTx(t,e){const s=at["AliasTransaction"].createForMosaic(at["Deadline"].create(),at["AliasActionType"].Link,new at["NamespaceId"](t),new at["MosaicId"](e),this.nemNode.network);return s}_errorNotFound(t){return"statusCode"in t&&404===t.statusCode}}class Lt{constructor(t,e,s,a,n){this.host=t,this.port=s,this.network=a,this.networkGenerationHash=n,this.endpoint=`${t}:${s}`,this.wsEndpoint=`${e}:${s}`}}const Mt="https://catapult-test.opening-line.jp",jt="wss://catapult-test.opening-line.jp",Ft="3001",Pt=Number("144"),Et="453052FDC4EB23BF0D7280C103F7797133A633B68A81986165B76FCE248AB235",Kt=new Lt(Mt,jt,Ft,Pt,Et),Rt=new ht(Kt),Ut=new ft(Kt),$t=new kt(Kt),Dt=new St(Kt),Bt=new Ot(Kt),Wt={LoadBalanceUseCase:new V(Rt,Bt),LoadWalletUseCase:new z(Rt),SendCoinUseCase:new Q(Ut,Rt),LoadTransactionHistoryUseCase:new X(Ut,Rt),AssetExchangeUseCase:new st(Ut,Rt,$t,Dt,Bt)};var Gt=s("ce5b"),qt=s.n(Gt);s("bf40"),s("e89a");const Jt={apiKey:"AIzaSyD0uyhQLAvEEwFCmDcTb71S_qm97A6IKIU",authDomain:"nem2-wallet-d3f63.firebaseapp.com",databaseURL:"https://nem2-wallet-d3f63.firebaseio.com",projectId:"nem2-wallet-d3f63",storageBucket:"nem2-wallet-d3f63.appspot.com",messagingSenderId:"910157321607",appId:"1:910157321607:web:5ea163a8aeadb5cf"},Yt=f["initializeApp"](Jt);tt["initialize"](Yt.firestore(),Yt.firestore().collection("version").doc("1"));a["default"].use(qt.a),a["default"].use(q.a,{defaultType:"bottom",duration:3e3,wordWrap:!0,width:"280px"}),a["default"].use(Y.a),a["default"].config.productionTip=!1,new a["default"]({provide:Wt,router:D,store:B,vuetify:new qt.a,render:t=>t(l)}).$mount("#app")}});
//# sourceMappingURL=app.0cf2b3ce.js.map