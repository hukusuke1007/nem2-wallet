(function(t){function e(e){for(var r,i,a=e[0],c=e[1],u=e[2],d=0,h=[];d<a.length;d++)i=a[d],s[i]&&h.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/nem2-wallet/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},4450:function(t,e,n){},"44b6":function(t,e,n){"use strict";var r=n("4450"),s=n.n(r);s.a},5:function(t,e){},"7faf":function(t,e,n){"use strict";var r=n("8fba"),s=n.n(r);s.a},"8fba":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[n("span",[t._v(t._s(t.title)+" ")])]),n("v-content",{staticClass:"main__content"},[n("v-fade-transition",{attrs:{mode:"out-in"}},[n("router-view")],1)],1)],1)},o=[],i=n("9ab4"),a=n("60a3"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="NEM2 wallet",e}return i["c"](e,t),e}(a["c"]),u=c,l=u,d=(n("7faf"),n("2877")),h=Object(d["a"])(l,s,o,!1,null,null,null),f=h.exports,p=n("8c4f"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"homepage"},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[null!==t.wallet?n("v-card",[n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Balance")])]),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:t.isLoading},on:{click:function(e){return t.onLoadBalance()}}},[n("v-icon",[t._v("cached")])],1)],1),n("v-card-text",[t._v(t._s(t.balance)+" xem")]),n("v-card-title",[n("h3",[t._v("Address")])]),n("v-card-text",[t._v(t._s(t.wallet.address))]),n("v-card",{attrs:{flat:""}},[n("qriously",{attrs:{size:200},model:{value:t.qrJson,callback:function(e){t.qrJson=e},expression:"qrJson"}})],1),n("div",[n("a",{attrs:{href:"#"},on:{click:function(){return t.isShowPrivateKey=!t.isShowPrivateKey}}},[t._v("Show PrivateKey")]),t.isShowPrivateKey?n("div",{staticStyle:{margin:"8px"}},[t._v("\n              "+t._s(t.wallet.privateKey)+"\n            ")]):t._e()])],1),n("v-card",{attrs:{flat:""}},[n("v-card-title",[n("h3",[t._v("Send")])]),n("div",{staticStyle:{margin:"4px 20px"}},[n("v-text-field",{attrs:{label:"Address",required:"",placeholder:"SADW6WXZVIUWIJ6RAWFSM4F4SJRUBRVOARXXIFSH"},model:{value:t.sendCoinInfo.address,callback:function(e){t.$set(t.sendCoinInfo,"address",e)},expression:"sendCoinInfo.address"}}),n("v-text-field",{attrs:{label:"NEM",type:"number",required:""},model:{value:t.sendCoinInfo.amount,callback:function(e){t.$set(t.sendCoinInfo,"amount",e)},expression:"sendCoinInfo.amount"}}),n("v-text-field",{attrs:{label:"Message",placeholder:"Hello"},model:{value:t.sendCoinInfo.message,callback:function(e){t.$set(t.sendCoinInfo,"message",e)},expression:"sendCoinInfo.message"}})],1),n("v-flex",[n("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onSend()}}},[t._v("SEND")])],1),n("v-flex",[n("v-card-title",[n("h3",[t._v("Result")])]),t._l(t.errorMessages,function(e,r){return n("div",{key:r},[!0!==e?n("div",{staticClass:"errorLabel"},[t._v(t._s(e))]):t._e()])}),n("p",{domProps:{innerHTML:t._s(t.resultMessage)}})],2),n("v-flex",[n("v-card-actions",[n("v-card-title",[n("h3",[t._v("Transaction history")])]),t._v("\n              "+t._s(t.transactionHistory.length)+"\n              "),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:t.isLoading},on:{click:function(e){return t.onLoadTransactionHistory()}}},[n("v-icon",[t._v("cached")])],1)],1),n("div",{staticStyle:{margin:"4px 20px"}},[n("v-data-table",{attrs:{headers:t.headers,items:t.transactionHistory,pagination:t.pagination,"hide-actions":"","no-data-text":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",{on:{click:function(n){return t.onClick(e.item)}}},[n("td",[t._v(t._s(e.item.amount))]),n("td",[t._v(t._s(e.item.hash))]),n("td",[t._v(t._s(t._f("dateFormat")(e.item.date)))])])]}}],null,!1,2647952482)}),n("v-btn",{staticClass:"white--text",attrs:{color:"deep-orange lighten-3",loading:t.isLoading,disabled:t.isLoading},on:{click:function(e){return t.onLoadTransactionHistory()}}},[t._v("MORE")])],1)],1)],1)],1)],1):t._e()],1)],1)},y=[],g=n("2f62"),m=n("340b"),b=n("10bf"),w=n.n(b),C=function(){function t(){}return t.qrJson=function(t,e,n,r,s,o){var i={type:e,data:{name:n,addr:r,amount:s*this.divisibility(),msg:o},v:t};return w.a.codeToString(w.a.convert(this.getStr2Array(JSON.stringify(i)),"UTF8"))},t.divisibility=function(){return Math.pow(10,6)},t.getStr2Array=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return e},t}(),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.balance=0,e.sendCoinInfo={address:"",amount:0,message:""},e.wallet=null,e.qrJson="",e.isShowPrivateKey=!1,e.errorMessages=[],e.resultMessage="",e.headers=[{text:"amount",value:"amount"},{text:"txHash",value:"hash"},{text:"date",value:"date"}],e.pagination={sortBy:"date",descending:!0,rowsPerPage:-1},e.transactionHistory=[],e}return i["c"](e,t),e.prototype.onValueChange=function(t,e){this.qrJson=C.qrJson(2,2,"nem2-wallet",t,0,"")},e.prototype.mounted=function(){a["c"].prototype.$toast("Hello NEM2 wallet"),this.configure()},e.prototype.configure=function(){return i["a"](this,void 0,void 0,function(){var t,e;return i["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),t=this,[4,this.fetchLoadWalletUseCase.execute()];case 1:return t.wallet=n.sent(),[4,this.onLoadBalance()];case 2:return n.sent(),[4,this.onLoadTransactionHistory()];case 3:return n.sent(),[3,5];case 4:return e=n.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.onLoadBalance=function(){return i["a"](this,void 0,void 0,function(){var t,e;return i["d"](this,function(n){switch(n.label){case 0:this.$store.commit("startLoading"),n.label=1;case 1:return n.trys.push([1,3,,4]),null===this.wallet?[2]:(t=this,[4,this.fetchLoadBalanceUseCase.execute(this.wallet.address)]);case 2:return t.balance=n.sent(),console.log("balance",this.balance),[3,4];case 3:return e=n.sent(),console.error("balance",e),[3,4];case 4:return this.$store.commit("stopLoading"),[2]}})})},e.prototype.onSend=function(){return i["a"](this,void 0,void 0,function(){var t,e;return i["d"](this,function(n){switch(n.label){case 0:this.$store.commit("startLoading"),n.label=1;case 1:if(n.trys.push([1,4,,5]),this.resultMessage="",0!==this.validation().length)throw new Error("Cloud not send coin.");return[4,this.fetchLoadWalletUseCase.execute()];case 2:return n.sent(),[4,this.fetchSendCoinUseCase.execute(this.sendCoinInfo.address,Number(this.sendCoinInfo.amount),this.sendCoinInfo.message)];case 3:return t=n.sent(),console.log("sendCoin",t),this.resultMessage="SUCCESS: "+t.hash,[3,5];case 4:return e=n.sent(),console.error("sendCoin",e),this.resultMessage="FAILED: "+e.message,[3,5];case 5:return a["c"].prototype.$toast(this.resultMessage),this.$store.commit("stopLoading"),[2]}})})},e.prototype.onClick=function(t){console.log("onClick",t)},e.prototype.onLoadTransactionHistory=function(){return i["a"](this,void 0,void 0,function(){var t,e,n;return i["d"](this,function(r){switch(r.label){case 0:this.$store.commit("startLoading"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fetchLoadTransactionHistoryUseCase.execute(20,this.transactionId)];case 2:return t=r.sent(),console.log("history",t),0!==t.length&&(this.transactionId=t[t.length-1].id),(n=this.transactionHistory).push.apply(n,t),console.log("onLoadTransactionHistory",this.transactionHistory,this.transactionId),[3,4];case 3:return e=r.sent(),console.error("onLoadTransactionHistory",e),[3,4];case 4:return this.$store.commit("stopLoading"),[2]}})})},e.prototype.validation=function(){return this.errorMessages=[],console.log(this.sendCoinInfo),40!==this.sendCoinInfo.address.length&&this.errorMessages.push('Address (except "-") is 40 characters'),/^[a-zA-Z0-9-]+$/.test(this.sendCoinInfo.address)||this.errorMessages.push("Invalid input"),this.sendCoinInfo.message.length>1024&&this.errorMessages.push("Maximum number of characters in message has exceeded"),this.errorMessages},e.prototype.clear=function(){this.sendCoinInfo={address:"",amount:0,message:""}},i["b"]([Object(a["b"])("FetchLoadBalanceUseCase")],e.prototype,"fetchLoadBalanceUseCase",void 0),i["b"]([Object(a["b"])("FetchLoadWalletUseCase")],e.prototype,"fetchLoadWalletUseCase",void 0),i["b"]([Object(a["b"])("FetchSendCoinUseCase")],e.prototype,"fetchSendCoinUseCase",void 0),i["b"]([Object(a["b"])("FetchLoadTransactionHistoryUseCase")],e.prototype,"fetchLoadTransactionHistoryUseCase",void 0),i["b"]([Object(a["d"])("wallet.address")],e.prototype,"onValueChange",null),e=i["b"]([Object(a["a"])({name:"HomePage",computed:Object(g["b"])(["isLoading"]),filters:{dateFormat:function(t){return Object(m["format"])(t,"YYYY/MM/DD HH:mm:ss")}}})],e),e}(a["c"]),_=x,S=_,L=(n("44b6"),Object(d["a"])(S,v,y,!1,null,"7287d3c3",null)),H=L.exports;r["default"].use(p["a"]);var k=new p["a"]({mode:"history",base:"/nem2-wallet/",routes:[{path:"/",name:"home_page",component:H}]});r["default"].use(g["a"]);var A=new g["a"].Store({state:{isLoading:!1},mutations:{stopLoading:function(t){t.isLoading=!1},startLoading:function(t){t.isLoading=!0}},actions:{}}),I=n("9483");Object(I["a"])("/nem2-wallet/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var M=n("ce5b"),T=n.n(M),O=(n("cc20"),n("7869")),F=n.n(O),K=n("6112"),j=n.n(K),P=function(){function t(t){this.repository=t}return t.prototype.execute=function(t){return i["a"](this,void 0,void 0,function(){var e;return i["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.repository.loadBalance(t)];case 1:return[2,n.sent()];case 2:throw e=n.sent(),e;case 3:return[2]}})})},t}(),B=function(){function t(t){this.repository=t}return t.prototype.execute=function(){return i["a"](this,void 0,void 0,function(){var t,e;return i["d"](this,function(n){switch(n.label){case 0:return[4,this.repository.loadWallet()];case 1:return t=n.sent(),void 0===t?[3,2]:(e=t,[3,4]);case 2:return[4,this.repository.createWallet()];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}})})},t}(),U=function(){function t(t,e){this.transactionRepository=t,this.walletRepository=e}return t.prototype.execute=function(t,e,n){return i["a"](this,void 0,void 0,function(){var r,s,o;return i["d"](this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.walletRepository.loadWallet()];case 1:return r=i.sent(),s=r.privateKey,[4,this.transactionRepository.sendAsset(s,t,e,n)];case 2:return[2,i.sent()];case 3:throw o=i.sent(),o;case 4:return[2]}})})},t}(),E=function(){function t(t,e){this.transactionRepository=t,this.walletRepository=e}return t.prototype.execute=function(t,e){return i["a"](this,void 0,void 0,function(){var n,r,s;return i["d"](this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.walletRepository.loadWallet()];case 1:return n=o.sent(),r=n.publicKey,[4,this.transactionRepository.transactionHistory(r,t,e)];case 2:return[2,o.sent()];case 3:throw s=o.sent(),s;case 4:return[2]}})})},t}(),R=n("a002"),W=n.n(R),$=function(){function t(t,e,n,r){this.address=t,this.publicKey=e,this.privateKey=n,this.networkType=r}return t.prototype.toJSON=function(){return{address:this.address,publicKey:this.publicKey,privateKey:this.privateKey,networkType:this.networkType}},t}(),J=function(){function t(t){this.wrapper=t,this.localStorageKey="nem2-wallet"}return t.prototype.createWallet=function(){return i["a"](this,void 0,void 0,function(){var t;return i["d"](this,function(e){switch(e.label){case 0:return t=this.wrapper.createAccount(),[4,W.a.setItem(this.localStorageKey,t.toJSON())];case 1:return e.sent(),[2,t]}})})},t.prototype.loadWallet=function(){return i["a"](this,void 0,void 0,function(){var t;return i["d"](this,function(e){switch(e.label){case 0:return[4,W.a.getItem(this.localStorageKey)];case 1:return t=e.sent(),console.log("loadWallet",t),null!==t?[2,new $("address"in t?t.address:void 0,"publicKey"in t?t.publicKey:void 0,"privateKey"in t?t.privateKey:void 0,"networkType"in t?t.networkType:void 0)]:[2,void 0]}})})},t.prototype.loadBalance=function(t){return i["a"](this,void 0,void 0,function(){var e;return i["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.wrapper.loadBalance(t)];case 1:return[2,n.sent()];case 2:throw e=n.sent(),e;case 3:return[2]}})})},t}(),N=function(){function t(t){this.wrapper=t}return t.prototype.sendAsset=function(t,e,n,r){return i["a"](this,void 0,void 0,function(){var s;return i["d"](this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.wrapper.sendAsset(t,e,n,r)];case 1:return[2,o.sent()];case 2:throw s=o.sent(),s;case 3:return[2]}})})},t.prototype.transactionHistory=function(t,e,n){return i["a"](this,void 0,void 0,function(){var r;return i["d"](this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.wrapper.transactionHistory(t,e,n)];case 1:return[2,s.sent()];case 2:throw r=s.sent(),r;case 3:return[2]}})})},t}(),q=n("db6a"),D=n("a6c5"),V=n("ebb6"),Y=n("f551"),Z=function(){function t(t,e,n,r,s,o,i,a,c){this.id=t,this.amount=e,this.fee=n,this.toAddress=r,this.fromAddress=s,this.message=o,this.date=i,this.hash=a,this.rawValue=c}return t}(),G=function(){function t(t,e){this.hash=t,this.message=e}return t}(),X=function(){function t(t,e,n,r){this.host=t,this.port=e,this.network=n,this.networkGenerationHash=r,this.endpoint=t+":"+e,this.accountHttp=new q["AccountHttp"](this.endpoint),this.mosaicHttp=new q["MosaicHttp"](this.endpoint),this.mosaicService=new q["MosaicService"](this.accountHttp,this.mosaicHttp),this.transactionHttp=new q["TransactionHttp"](this.endpoint),console.log(this.host,this.port,this.network,this.endpoint,this.networkGenerationHash)}return t.prototype.createAccount=function(){var t=q["Account"].generateNewAccount(this.network);return new $(t.address.plain(),t.publicKey,t.privateKey,t.address.networkType.valueOf())},t.prototype.loadBalance=function(t){return i["a"](this,void 0,void 0,function(){var e,n=this;return i["d"](this,function(r){return e=q["Address"].createFromRawAddress(t),[2,new Promise(function(t,r){n.mosaicService.mosaicsAmountViewFromAddress(e).pipe(Object(D["a"])(function(t){return t})).subscribe(function(e){return t(e.relativeAmount())},function(t){return r(t)})})]})})},t.prototype.sendAsset=function(t,e,n,r){return i["a"](this,void 0,void 0,function(){var s,o,a,c,u=this;return i["d"](this,function(i){return s=q["Address"].createFromRawAddress(e),o=q["TransferTransaction"].create(q["Deadline"].create(),s,[q["NetworkCurrencyMosaic"].createRelative(n)],void 0!==r?q["PlainMessage"].create(r):q["PlainMessage"].create(""),this.network),a=q["Account"].createFromPrivateKey(t,this.network),c=a.sign(o,this.networkGenerationHash),[2,new Promise(function(t,e){u.transactionHttp.announce(c).pipe(Object(V["a"])(function(t){return new G(c.hash,t.message)})).subscribe(function(e){return t(e)},function(t){return e(t)})})]})})},t.prototype.transactionHistory=function(t,e,n){return i["a"](this,void 0,void 0,function(){var r,s=this;return i["d"](this,function(o){return r=q["PublicAccount"].createFromPublicKey(t,this.network),[2,new Promise(function(t,o){s.accountHttp.transactions(r,new q["QueryParams"](e,n)).pipe(Object(V["a"])(function(t){return t.filter(function(t){return t instanceof q["TransferTransaction"]}).map(function(t){return t}).filter(function(t){return void 0!==t.transactionInfo&&t.transactionInfo instanceof q["TransactionInfo"]}).map(function(t){return new Z(t.transactionInfo.id,0!==t.mosaics.length?t.mosaics[0].amount.compact()/C.divisibility():0,t.maxFee.compact(),t.recipient instanceof q["Address"]?t.recipient.plain():"",void 0!==t.signer?t.signer.address.plain():"",t.message.payload,new Date(t.deadline.value.atZone(Y["ZoneId"].SYSTEM).toInstant().toEpochMilli()),t.transactionInfo.hash,t)})})).subscribe(function(e){return t(e)},function(t){return o(t)})})]})})},t}(),z="https://jp5.nemesis.land",Q="3001",tt="144",et="9F1979BEBA29C47E59B40393ABB516801A353CFC0C18BC241FEDE41939C907E7",nt=new X(z,Q,tt,et),rt=new J(nt),st=new N(nt),ot={FetchLoadBalanceUseCase:new P(rt),FetchLoadWalletUseCase:new B(rt),FetchSendCoinUseCase:new U(st,rt),FetchLoadTransactionHistoryUseCase:new E(st,rt)};r["default"].use(T.a),r["default"].use(F.a,{defaultType:"bottom",duration:3e3,wordWrap:!0,width:"280px"}),r["default"].use(j.a),r["default"].config.productionTip=!1,new r["default"]({provide:ot,router:k,store:A,render:function(t){return t(f)}}).$mount("#app")}});
//# sourceMappingURL=app.034f05f6.js.map